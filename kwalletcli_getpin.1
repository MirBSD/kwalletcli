.\" $MirOS: contrib/hosted/tg/code/kwalletcli/kwalletcli_getpin.1,v 1.4 2009/07/08 13:49:00 tg Exp $
.\"-
.\" Copyright © 2009
.\"	Thorsten Glaser <tg@mirbsd.org>
.\"
.\" Provided that these terms and disclaimer and all copyright notices
.\" are retained or reproduced in an accompanying document, permission
.\" is granted to deal in this work without restriction, including un‐
.\" limited rights to use, publicly perform, distribute, sell, modify,
.\" merge, give away, or sublicence.
.\"
.\" This work is provided “AS IS” and WITHOUT WARRANTY of any kind, to
.\" the utmost extent permitted by applicable law, neither express nor
.\" implied; without malicious intent or gross negligence. In no event
.\" may a licensor, author or contributor be held liable for indirect,
.\" direct, other damage, loss, or other issues arising in any way out
.\" of dealing in the work, even if advised of the possibility of such
.\" damage or existence of a defect, except proven that it results out
.\" of said person’s immediate fault when using the work as intended.
.\"-
.\" Try to make GNU groff and AT&T nroff more compatible
.\" * ` generates ‘ in groff, so use \`
.\" * ' generates ’ in groff, \' generates ´, so use \*(aq
.\" * - generates ‐ in groff, \- generates −, fixed in tmac/mdoc/doc-groff
.\"   thus use - for hyphens and \- for minus signs and option dashes
.\" * ~ is size-reduced and placed atop in groff, so use \*(TI
.\" * ^ is size-reduced and placed atop in groff, so use \*(ha
.\" * \(en does not work in nroff, so use \*(en
.ie \n(.g \{\
.	ds aq \(aq
.	ds TI \(ti
.	ds ha \(ha
.	ds en \(en
.\}
.el \{\
.	ds aq '
.	ds TI ~
.	ds ha ^
.	ds en \(em
.\}
.\" Implement .Dd with the Mdocdate RCS keyword
.rn Dd xD
.de Dd
.ie \\$1$Mdocdate: \{\
.	xD \\$2 \\$3, \\$4
.\}
.el .xD \\$1 \\$2 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
..
.\"-
.Dd $Mdocdate: July 8 2009 $
.Dt KWALLETCLI_GETPIN 1
.Os
.Sh NAME
.Nm kwalletcli_getpin
.Nd command line interface to pinentry
.Sh SYNOPSIS
.Nm
.Op Fl E | e Ar errortext
.Op Fl b | p Ar prompt
.Op Fl t Ar desctext
.Sh DESCRIPTION
The
.Nm
utility is a shell wrapper speaking to
.Nm pinentry
using the Aegypten protocol.
It will ask the user for a password and print it,
without any trailing newline, to standard output.
.Pp
The options are as follows:
.Bl -tag -width xPxdesctxt
.It Fl b
Ask for a confirmation (boolean) instead of a passphrase.
.It Fl E
Unset a previously set error text.
.It Fl E Ar errtxt
Set the error text to
.Ar errtxt ,
displaying a dialogue box with a red X icon indicating
that this is a retry question.
.It Fl p Ar prompt
Set the small descriptive text shown in front of the input field
.Pq Dq the Prompt
to
.Ar prompt .
.It Fl t Ar desctxt
Set the descriptive text
.Pq the input challenge
to
.Ar desctxt .
.El
.Pp
All input and output is assumed to be in UTF-8.
.Sh RETURN VALUES
The
.Nm
utility exits 0 on success, 1 if the password input
was cancelled by the user, or >1 if an error occurred.
Confirmation (boolean) error codes are 0 for Yes,
1 for No, or >1 if an error occurred.
.Sh ENVIRONMENT
.Bl -tag -width PINENTRY
.It Ev DISPLAY
If not set, pass the current terminal and its type to
.Nm pinentry .
.It Ev GPG_TTY
The current terminal, determined by
.Xr tty 1
if unset.
.It Ev PINENTRY
The
.Nm pinentry
programme to use.
Default:
.Dq pinentry
.It Ev TERM
Terminal type of the current tty.
Default:
.Dq vt100
.El
.Sh SEE ALSO
.Xr kwalletcli 1 ,
.Xr pinentry 1 ,
.Xr stty 1 ,
.Xr tset 1 ,
.Xr tty 1
.Sh AUTHORS
.Nm
was written by
.An Thorsten Glaser Aq tg@mirbsd.org
mostly for tarent GmbH.
